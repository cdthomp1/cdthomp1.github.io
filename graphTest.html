<!DOCTYPE HTML>
<html>

    <head>
        <!-- Plotly.js -->
        <link rel="stylesheet" href="assets/css/main2.css" />
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

        <style>
            table {
                font-family: arial, sans-serif;
                border-collapse: collapse;
                width: 100%;
            }

            td,
            th {
                border: 1px solid #dddddd;
                text-align: left;
                padding: 8px;
            }

            tr:nth-child(even) {
                background-color: #dddddd;
            }

            .button {
                background-color: #924169;
                color: #ffffff !important;

                border: none;

                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
            }

            .money {
                color: blue;
            }
        </style>

    </head>

    <body onload="generateGraph()">

        <table>
            <tr>
                <td style="width: 20%">
                    <table style="width: 25%">
                        <tbody>

                            <tr>
                                <td>House Value</td>
                                <td>
                                    <input value="115000" size="20" type="text" class="houseValue" required/>
                                </td>
                            </tr>
                            <tr>
                                <td>Mortgage Balance</td>
                                <td>
                                    <input value="72000" size="20" type="text" class="mortgageBalance" required/>
                                </td>
                            </tr>
                            <tr>
                                <td>Appreciation Rate
                                </td>
                                <td>
                                    <input value="3%" size="20" type="text" class="appreciationRate" required/>
                                </td>
                            </tr>
                            <tr>
                                <td>Closing Costs Now
                                </td>
                                <td>
                                    <input value="1%" size="20" type="text" class="ccn" required/>
                                </td>
                            </tr>
                            <tr>
                                <td>Selling Costs
                                </td>
                                <td>
                                    <input value="6%" size="20" type="text" class="sellingCosts" required/>
                                </td>
                            </tr>
                            <tr>
                                <td>Monthly Rent
                                </td>
                                <td>
                                    <input value="900" size="20" type="text" class="monthlyRent" required/>
                                </td>
                            </tr>
                            <tr>
                                <td>Property Management Fee
                                </td>
                                <td>
                                    <input value="10%" size="20" type="text" class="propertyManagementFee" required/>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: center" colspan="2">
                                    <input type="button" class="button" value="Submit" class="myButton" onclick="generateGraph()" />
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </td>
                <td>
                    <div id="myDiv">
                        <!-- Plotly chart will be drawn inside this DIV -->
                    </div>
                </td>
            </tr>
        </table>




        <div id="myDiv">
            <!-- Plotly chart will be drawn inside this DIV -->
        </div>

        <table style="width: 50%">
            <thead>
                <th>Year End</th>
                <th>Rental Income</th>
                <th>Mortgage Expense</th>
                <th>Other Costs</th>
                <th>Net Cash Flow</th>
                <th>House Value</th>
                <th>House Equity</th>
                <th>Wealth (Rent Out)</th>
                <th style="background-color: #1F77B4">Wealth (Sell Now)</th>
                <th>Difference</th>
            </thead>
            <tbody>
                <tr>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>
                        <span id="houseValue"></span>
                    </td>
                    <td>
                        <span id="houseEquity1"></span>
                    </td>
                    <td>0</td>
                    <td>
                        <span id="sellNow"></span>
                    </td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>
                        <span id="houseValue1"></span>
                    </td>
                    <td>
                        <span id="houseEquity2"></span>
                    </td>
                    <td>0</td>
                    <td>
                        <span id="sellNow1">$</span>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>
                        <span id="houseValue2"></span>
                    </td>
                    <td>
                        <span id="houseEquity2"></span>
                    </td>
                    <td>0</td>
                    <td>
                        <span id="sellNow2"></span>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>
                        <span id="houseValue3"></span>
                    </td>
                    <td>
                        <span id="houseEquity2"></span>
                    </td>
                    <td>0</td>
                    <td>
                        <span id="sellNow3"></span>
                    </td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>
                        <span id="houseValue4"></span>
                    </td>
                    <td>
                        <span id="houseEquity2"></span>
                    </td>
                    <td>0</td>
                    <td>
                        <span id="sellNow4"></span>
                    </td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>
                        <span id="houseValue5"></span>
                    </td>
                    <td>
                        <span id="houseEquity2"></span>
                    </td>
                    <td>0</td>
                    <td>
                        <span id="sellNow5"></span>
                    </td>

                </tr>
            </tbody>



        </table>


        <span id="sellNow5"></span>














        <script>
            function generateGraph() {


                var houseValue = parseInt(document.getElementsByClassName('houseValue')[0].value);

                var mortgageBalance = parseInt(document.getElementsByClassName('mortgageBalance')[0].value);

                var appreciationRate = parseInt(document.getElementsByClassName('appreciationRate')[0].value);

                var ccn = parseInt(document.getElementsByClassName('ccn')[0].value);


                var sellingCosts = parseInt(document.getElementsByClassName('sellingCosts')[0].value);


                var monthlyRent = parseInt(document.getElementsByClassName('monthlyRent')[0].value);
                var propertyManagementFee = parseInt(document.getElementsByClassName('propertyManagementFee')[0].value);


                var result2 = parseFloat(ccn) / 100.0;
                var result1 = parseFloat(sellingCosts) / 100.0;
                var result = parseFloat(appreciationRate) / 100.0;
                var pmf = parseFloat(propertyManagementFee) / 100.0;

                var reInvestmentTaxRate = 0.06;
                var occupancyRate = 0.8;

                var houseEquity = houseValue - mortgageBalance;






                var sellNow = (houseValue - mortgageBalance) - ((houseValue * result2) + (houseValue * result1));
                var sellNow1 = sellNow + (sellNow * reInvestmentTaxRate);
                var sellNow2 = sellNow1 + (sellNow1 * reInvestmentTaxRate);
                var sellNow3 = sellNow2 + (sellNow2 * reInvestmentTaxRate);
                var sellNow4 = sellNow3 + (sellNow3 * reInvestmentTaxRate);
                var sellNow5 = sellNow4 + (sellNow4 * reInvestmentTaxRate);

                var a = Math.round(sellNow2);
                var b = Math.round(sellNow3);
                var c = Math.round(sellNow4);
                var d = Math.round(sellNow5);


                var houseValue1 = houseValue + houseValue * result;
                var houseValue2 = houseValue1 + (houseValue1 * result);
                var houseValue3 = houseValue2 + (houseValue2 * result);
                var houseValue4 = houseValue3 + (houseValue3 * result);
                var houseValue5 = houseValue4 + (houseValue4 * result);
                var houseValue6 = houseValue5 + (houseValue5 * result);

                var rhv1 = Math.round(houseValue1);
                var rhv2 = Math.round(houseValue1);
                var rhv3 = Math.round(houseValue3);
                var rhv4 = Math.round(houseValue4);
                var rhv5 = Math.round(houseValue5);
                var rhv6 = Math.round(houseValue6);


                var rentalIncome = ((monthlyRent - (monthlyRent * pmf)) * 12) * occupancyRate;



                console.log(`(${houseValue}, ${mortgageBalance})`);
                console.log(`(${houseEquity})`);
                console.log(`(${result})`);
                console.log(`(${houseValue1})`);
                console.log(`(${sellNow})`);
                console.log(`(${result2})`);

                console.log(`(${result1})`);
                console.log(`(${rentalIncome})`);









                var sell = {
                    x: [0, 1, 2, 3, 4, 5, 6],
                    y: [sellNow, sellNow1, sellNow2, sellNow3, sellNow4, sellNow5],
                    mode: 'lines+markers',
                    name: 'Sell'
                };

                var rent = {
                    x: [0, 1, 2, 3, 4, 5, 6],
                    y: [12000, 90000, 15000, 12000, 10000, 60000, 70000],
                    mode: 'lines+markers',
                    name: 'Rent'
                };


                var data = [sell, rent]; 

                var layout = {
                    title: 'Rent VS. Sell',
                    xaxis: {
                        title: 'Years'
                    },
                    yaxis: {
                        title: 'Money! :D'
                    }
                };

                Plotly.newPlot('myDiv', data, layout);

                document.getElementById("houseEquity1").innerHTML = houseEquity;
                document.getElementById("houseEquity2").innerHTML = houseEquity + 3;
                document.getElementById("houseValue").innerHTML = houseValue;
                document.getElementById("houseValue1").innerHTML = rhv1;
                document.getElementById("houseValue2").innerHTML = rhv2;
                document.getElementById("houseValue3").innerHTML = rhv3;
                document.getElementById("houseValue4").innerHTML = rhv4;
                document.getElementById("houseValue5").innerHTML = rhv5;

                document.getElementById("sellNow").innerHTML = sellNow;
                document.getElementById("sellNow1").innerHTML = sellNow1;
                document.getElementById("sellNow2").innerHTML = a;
                document.getElementById("sellNow3").innerHTML = b;
                document.getElementById("sellNow4").innerHTML = c;
                document.getElementById("sellNow5").innerHTML = d;








            }
        </script>


    </body>

</html>